<!DOCTYPE html>
<html>

<head>
    <title>Payment Infomation</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script type="text/javascript" src="https://js.stripe.com/v2/"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="../../js/loggedIn.js"></script>
    <script src="../../js/main.js"></script>
    <link rel="stylesheet" type="text/css" href="../../css/main.css">
</head>
<body>
<div class="container">
    <div class="row">
        <h1>Payment Information</h1>

        <div class="leftNav">
            <a href="../main/index.html" class="btn-default btn">Home</a>
            <a href="purchasePowerUps.html" class="btn-default btn">Purchase Power Ups</a>
            <a href="currentPowerUps.html" class="btn-default btn">Current Power Ups</a>
            <a href="viewTransactions.html" class="btn-default btn">View Transactions</a>
            <!--<a href="paymentInfo.html" class="btn-default btn">Payment Information</a>-->
            <a href="../main/leaderboard.html" class="btn-default btn">Leaderboard</a>
            <a href="paymentStub.html" class="btn btn-default">Payment Stub</a>
            <a href="stats.html" class="btn btn-default">Stats</a>
            <a href="delete.html" class="btn-danger btn">Delete Account</a>
        </div>

        <div class="signedIn"></div>        <!-- Check if you are logged in -->

        <div class="scrollWrapper">
            <form action="javascript:card()" method="post" id="payment-form">
                    <label for="cc">Card Number</label>
                        <input type="text" size="20" id="cc" maxlength="14" pattern="[\d]{14}"
                               oninvalid="setCustomValidity('The credit card must be 14 characters');"
                               oninput="setCustomValidity('')" placeholder="14 numbers" required/><br>

                    <label for="cvc">CVC</label>
                        <input type="text" size="4" id="cvc" maxlength="3" pattern="[\d]{3}"
                               oninvalid="setCustomValidity('The CVC must be 3 numbers');"
                               oninput="setCustomValidity('')" placeholder="123" required/><br>

                    <label for="month">Expiration (MM/YYYY)</label>
                        <input type="text" size="2" id="month" maxlength="2" pattern="[\d]{2}"
                               oninvalid="setCustomValidity('Please enter a valid 2 digit month');"
                               oninput="setCustomValidity('')" placeholder="04" required/>
                /
                    <input type="text" size="4" data-stripe="exp-year" id="year" maxlength="4" pattern="[\d]{4}"
                           oninvalid="setCustomValidity('Please enter a valid year');"
                           oninput="setCustomValidity('')" placeholder="2015" required/><br>

                <label for="ccType">Credit Card Type</label>
                        <select id="ccType" required>
                            <option selected="selected">Select a Credit Card Type</option>
                            <option value="Visa" class="visa">Visa</option>
                            <option value="Mastercard" class="mastercard">Mastercard</option>
                            <option value="Discover" class="discover">Discover</option>
                            <option value="Amex" class="amex">American Express</option>
                        </select><br>
                <button type="submit" class="payment">Submit Payment</button>
            </form>
        </div>
    </div>
</div>
<script>

    function card() {
        var ccNumber = document.getElementById('cc').value,
                cvc = document.getElementById('cvc').value,
                month = document.getElementById('month').value,
                year = document.getElementById('year').value,
                type = document.getElementById('ccType').value;

        localStorage.setItem('Credit Card #', ccNumber);
        localStorage.setItem('CVC', cvc);
        localStorage.setItem('CC_month', month);
        localStorage.setItem('CC_year', year);
        localStorage.setItem('CC_type', type);

        $('.payment').on('click', function () {
            $.ajax({
                url: 'http://52.32.43.132:8080/addCard?',
                type: 'POST',
                data: 'userID=' + userID + 'creditCardNumber=' + ccNumber + 'creditCardType=' + type,
                crossDomain: true,
                success: function(response){
                    window.location.href = 'paymentStub.html';
                }
            })
        })
    }
</script>
</body>
</html>